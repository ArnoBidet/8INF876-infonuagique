sequenceDiagram
    participant D1 as Drone Controller 1
    participant C1 as Communication Protocol 1
    participant C2 as Communication Protocol 2
    participant D2 as Drone Controller 2
    participant ZE as Zone Estimator
    participant GF as Geofencing Logic
    
    %% Initialisation
    D1->>C1: start_discovery()
    D2->>C2: start_discovery()
    
    %% Diffusion de position
    loop Position Broadcast
        D1->>C1: broadcast_position(pos1)
        C1->>C2: [BLE/WiFi/LoRa] position_msg
        C2->>D2: receive position
        D2->>ZE: update_neighbor(drone1_info)
    end
    
    %% Estimation de zone
    D2->>ZE: compute_convex_hull()
    ZE-->>D2: hull_positions
    D2->>GF: is_outside_zone(current_pos)
    
    %% Détection de sortie
    alt Drone outside zone
        GF-->>D2: true (outside)
        D2->>GF: generate_correction_vector()
        GF-->>D2: correction_vector
        D2->>D2: apply_correction()
    end
    
    %% Génération d'alerte
    alt Neighbor exit detected
        D2->>GF: detect_neighbor_exit()
        GF-->>D2: exit_alerts
        D2->>C2: send_alert(exit_alert)
        C2->>C1: [relay] alert_msg
        C1->>D1: receive alert
        D1->>GF: should_relay_alert(alert)
        alt Should relay
            D1->>C1: send_alert(relayed_alert)
        end
    end